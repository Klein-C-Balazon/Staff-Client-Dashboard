<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>Staff / Client Dashboard</title>
</head>
<body>

    <h1>Staff / Client Dashboard</h1>

    <!-- Cashier View -->
    <section id="cashier-view">
        <h2>Cashier View</h2>
        <ul id="cashier-orders"></ul>
    </section>

    <!-- Kitchen View -->
    <section id="kitchen-view">
        <h2>Kitchen View</h2>
        <ul id="kitchen-orders"></ul>
    </section>

    <!-- Notifications -->
    <section>
        <h2>Notifications</h2>
        <div id="notifications">No new notifications</div>
    </section>

    <!-- Undo Button -->
     <section>
    <button id="undoBtn">Undo Last Action</button>
     </section>

    <script>
        // -----------------------------
        //   SIMULATED BACKEND DATA (TEMPORARY)
        // -----------------------------
        let orders = [
            { id: 1, status: "Pending" },
            { id: 2, status: "Pending" }
        ];

        const actionStack = []; // for undo-ing history


        // -----------------------------
        //   DOM ELEMENT REFERENCES
        // -----------------------------
        const cashierList = document.getElementById("cashier-orders");
        const kitchenList = document.getElementById("kitchen-orders");
        const notifications = document.getElementById("notifications");


        // -----------------------------
        //   RENDER UI
        // -----------------------------
        function renderUI() {
            cashierList.innerHTML = "";
            kitchenList.innerHTML = "";

            orders.forEach(order => {
                // CASHIER VIEW - only Pending orders
                if (order.status === "Pending") {
                    const li = document.createElement("li");
                    li.innerHTML = `
                        Order #${order.id}
                        <button onclick="markPaid(${order.id})">Paid</button>
                    `;
                    cashierList.appendChild(li);
                }

                // KITCHEN VIEW - only Paid or higher
                if (order.status === "Paid" || order.status === "Preparing" || order.status === "Ready") {
                    const li2 = document.createElement("li");
                    li2.innerHTML = `
                        Order #${order.id} â€” Status: ${order.status}
                        <button onclick="setStatus(${order.id}, 'Preparing')">Preparing</button>
                        <button onclick="setStatus(${order.id}, 'Ready')">Ready</button>
                    `;
                    kitchenList.appendChild(li2);
                }
            });
        }


        // -----------------------------
        //   ACTION: MARK PAID
        // -----------------------------
        function markPaid(id) {
            const order = orders.find(o => o.id === id);
            actionStack.push({ id: id, prev: order.status }); 
            order.status = "Paid";

            sendNotification(`Order #${id} marked as Paid.`);
            renderUI();
        }


        // -----------------------------
        //   ACTION: UPDATE STATUS
        // -----------------------------
        function setStatus(id, newStatus) {
            const order = orders.find(o => o.id === id);
            actionStack.push({ id: id, prev: order.status });
            order.status = newStatus;

            sendNotification(`Order #${id} is now ${newStatus}.`);
            renderUI();
        }


        // -----------------------------
        //   UNDO ACTION
        // -----------------------------
        document.getElementById("undoBtn").addEventListener("click", () => {
            if (actionStack.length === 0) {
                sendNotification("Nothing to undo.");
                return;
            }

            const last = actionStack.pop();
            const order = orders.find(o => o.id === last.id);
            order.status = last.prev;

            sendNotification(`Undo: Order #${last.id} returned to ${last.prev}.`);
            renderUI();
        });


        // -----------------------------
        //   NOTIFICATION SYSTEM
        // -----------------------------
        function sendNotification(msg) {
            notifications.textContent = msg;
        }


        // ------------------------------------------
        //   SIMULATED NEW ORDERS (LIVE/TEMPORARY) 
        // ------------------------------------------
        setInterval(() => {
            if (Math.random() < 0.25) { // 25% chance
                const newId = orders.length + 1;
                orders.push({ id: newId, status: "Pending" });

                sendNotification(`New Order #${newId} received!`);
                renderUI();
            }
        }, 5000);


        // Initial UI render
        renderUI();
    </script>

</body>
</html>














